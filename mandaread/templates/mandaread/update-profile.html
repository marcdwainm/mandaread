{% extends "mandaread/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
    <main class="container">
        {% if messages %}
            {% for message in messages %}
                <div class = "alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        <div class="d-flex justify-content-center flex-column bg-warning shadow p-5 mb-5 rounded">
            <div class = "d-flex flex-column justify-content-center align-items-center mb-3">
                <div>
                    <img class = "rounded-circle account-img border border-secondary shadow" src="{{ user.profile.image.url }}">
                </div>
                <div class = "d-inline-flex flex-column justify-content-center">
                    <h1 class = "text-center">{{ user.username }}</h1>
                    <span class = "text-center">{{ user.email }}</span>
                </div>
            </div>

            <form method = "POST" class = "bg-light p-5 shadow rounded" enctype = "multipart/form-data">
                {% csrf_token %}
                <fieldset class = "mb-3">
                    <legend>Update Username</legend>
                    {{ u_form|crispy }}
                </fieldset>
                <hr/>
                <fieldset class = "mb-3">
                    <legend>Change Profile Picture</legend>
                    {{ p_form|crispy }}
                </fieldset>
                <div class = "d-flex flex-column flex-md-row justify-content-md-between">
                    <button class = "btn btn-warning mb-1" type = "submit">Save Changes</button>
                    <div class = 'd-flex flex-column flex-md-row'>
                        <a class = "btn btn-warning mb-1 mx-md-2" href = "{% url 'mandaread-update-pass' %}">Change Password</a>
                        <a class = "btn btn-danger mb-1" href = "{% url 'mandaread-delete-acc' %}">Delete Account</a>
                    </div>
                </div>
            </form>
        </div>
    </main>
{% endblock %}